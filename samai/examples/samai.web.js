!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("svg.js")):"function"==typeof define&&define.amd?define(["svg.js"],e):"object"==typeof exports?exports.Samai=e(require("svg.js")):t.Samai=e(t.SVG)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),u=r(a),s=n(1),l=r(s),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.element,r=void 0===n?document.createElement("div"):n,o=e.date,a=void 0===o?new Date:o,s=e.width,c=void 0===s?400:s,f=e.dark_colors,h=void 0===f?["#222","#227","#272","#777","#427","#722"]:f,d=e.light_colors,v=void 0===d?["#39C","#3C6","#CCC","#FC3","#C6C","#F63"]:d,_=e.line_count,g=void 0===_?2:_,p=e.fabric_enabled,m=void 0!==p&&p,b=e.n,y=void 0===b?1:b;i(this,t);var w=new l.default(this._setDate(a));this.svg=(0,u.default)(r),this.prng=new l.default(this.date),this.width=c,this.dark_colors=t.shuffle(h,w),this.light_colors=t.shuffle(v,w),this.pattern_width=c/g,this.line_count=g,this.line_height=this.pattern_width/g,this.fabric_enabled=m,this._prngNo=18,y>1&&this._goto(y),this._generatePattern()}return o(t,[{key:"_goto",value:function(t){for(var e=0;e<(t-1)*this._prngNo;e++)this.prng._next()}},{key:"_setDate",value:function(t){var e=new Date,n=t||e;return n instanceof Date?isNaN(n.getTime())&&(n=e):"string"==typeof n?(n=new Date(n),isNaN(n.getTime())&&(n=e)):n=e,this.date=n,this.date}},{key:"_getDateString",value:function(){var t=void 0,e=this.date.getMonth()+1,n=this.date.getDate();return t=(e<10?"0"+e:e)+"-",t+=(n<10?"0"+n:n)+"-",t+=this.date.getFullYear()}},{key:"_randomShape",value:function(t,e){for(var n=this.prng,r=this.line_count,i=this.line_height,o=[3],a=o[n.random(o.length-1)],u=[],s=n.random(1),l=n.random(r,1),c=r/2,f=n.random(r),h=f>c?n.random(r,c):n.random(c),d=0,v=0;v<a;v++){var _=v+1>Math.ceil(a/2)?l:0;d%2===s?u.push([(f+_)*i,0]):u.push([(h+_)*i,i]),v<a-1&&(d%2!==s?u.push([(f+_)*i,0]):u.push([(h+_)*i,i]),v++),d++}e.polygon(u).fill(t)}},{key:"_generatePattern",value:function(){var t=this,e=this.svg,n=this.pattern_width,r=this.line_count,i=this.line_height,o=this.prng.random(1),a=this.prng.random(1),u=this.prng.random(1);e.clear();var s=e.pattern(n,i,function(e){e.rect(i*(r/2),i).fill(t._fabric(t.light_colors[0],2)),e.rect(i*(r/2),i).fill(t._fabric(t.dark_colors[0],1)).move(i*(r/2),0),t._randomShape(t._fabric(t.light_colors[1],0),e),t._randomShape(t._fabric(t.dark_colors[1],1),e),t._randomShape(t._fabric(t.light_colors[2],0),e)});return s=e.pattern(n,2*i,function(t){t.rect(n,i).fill(s),o?t.rect(n,i).fill(s).move(0,i).flip("y"):t.rect(n,i).fill(s).move(0,i).rotate(180)}),a&&(s=e.pattern(2*n,2*i,function(t){t.rect(n,2*i).fill(s),u?t.rect(n,2*i).fill(s).move(n,0).flip("x"):t.rect(n,2*i).fill(s).move(n,0).rotate(180)})),e.viewbox(0,0,this.width,this.width),e.rect(this.width,this.width).fill(s),this.data_uri="data:image/svg+xml;base64,"+btoa(e.svg()),this.svg_pattern=s,s}},{key:"_fabric",value:function(e,n){var r=this,i=e;if(this.fabric_enabled){var o=4,a=o/2,u=function(t,e){return r.svg.pattern(2*t,2*t,function(n){n.rect(t,t).fill(e),n.rect(t,t).fill(e).move(t,0).rotate(90),n.rect(t,t).fill(e).move(0,t).rotate(180),n.rect(t,t).fill(e).move(t,t).rotate(270)})};i=this.svg.pattern(o,o,function(n){n.rect(a,a).fill(e),n.rect(a,a).fill(t.luminance(e,.03)).move(a,0),n.rect(a,a).fill(t.luminance(e,.06)).move(0,a),n.rect(a,a).fill(t.luminance(e,.09)).move(a,a)}),n>0&&(i=u(o,i)),n>1&&(i=u(o*=2,i))}return i}},{key:"next",value:function(){return this._generatePattern(),this.data_uri}},{key:"download",value:function(){var t=this;this.getPNG().then(function(e){var n=document.createElement("a");n.download="sama."+t._getDateString()+"."+t.prng.count/t._prngNo+".png",n.href=e,n.click()})}},{key:"getPNG",value:function(){var t=this;return new Promise(function(e,n){var r=document.createElement("canvas"),i=r.getContext("2d"),o=new Image;r.setAttribute("width",t.width+"px"),r.setAttribute("height",t.width+"px"),o.src=t.data_uri,o.onerror=n,o.onload=function(){return i.drawImage(o,0,0),e(r.toDataURL("image/png"))}})}}],[{key:"shuffle",value:function(t,e){var n=t.slice(),r=void 0,i=void 0,o=void 0;for(o=n.length-1;o>0;o--)r=e.random(o),i=n[o],n[o]=n[r],n[r]=i;return n}},{key:"luminance",value:function(t,e){e=e||0,t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n="#",r=void 0,i=void 0;for(i=0;i<3;i++)r=parseInt(t.substr(2*i,2),16),r=Math.round(Math.min(Math.max(0,r+r*e),255)).toString(16),n+=("00"+r).substr(r.length);return n}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this._p=2147483647,this._c=2147483646,this._r=16807,this.count=0,this._seed=this._dateSeed(e)%this._p,this._seed<=0&&(this._seed+=this._c)}return i(t,[{key:"_dateSeed",value:function(t){return t=""+(t.getMonth()+1)+t.getDate()+t.getFullYear(),Number.parseInt(t)}},{key:"_next",value:function(){return this.count++,this._seed=this._seed*this._r%this._p}},{key:"_nextFloat",value:function(){for(var t=(this._next()-1)/this._c;t<1;)t*=10;return t}},{key:"random",value:function(t,e){return e=e||0,Math.floor(this._nextFloat()%(t+1-e))+e}}]),t}();e.default=o},function(e,n){e.exports=t},function(t,e,n){"use strict";t.exports=n(0).default}])});